{% load i18n %}
{% load course_tags %}

{% if rendered_content %}
  {{ rendered_content|safe }}
{% endif %}

{% if emb_content %}
  {% if revision and revision > 0 and user.is_superuser %}
    <div class="revision-info-embedded">This is an old revision â„– {{ revision }} of this embedded page!</div>
  {% endif %}
  <div>{{ emb_content|safe }}</div>
{% endif %}

{% block extra-content %}
{% endblock %}

<div class="question">
  <div class="results-box hints" style="display: none">
    <span class="results-header">{% trans 'Hints' %}</span>
    <div class="hints-list"></div>
  </div>
  
  <form id="{{ content_slug }}-form" class="exercise-form" method="POST" enctype="multipart/form-data"
        {% if revision and not sandboxed%}action="{% url 'lovelace_lti:check' course instance content revision %}"
        {% comment %}
            {% elif sandboxed %}action="{% url 'courses:check_sandboxed' content.slug %}"
        {% endcomment %}
        {% else %}action="{% url 'lovelace_lti:check' course instance content "head" %}"{% endif %}>
    
    {% csrf_token %}
    {% if question %}{{ question|safe }}{% endif %}
    
    {% block exercise-form %}
    {% endblock %}

    <input type="submit" name="submit" value="{% trans 'Send answer' %}">
    
    {% if evaluation == "unanswered" %}
      <div class="answered-status"></div>
    {% elif evaluation == "incorrect" %}
      <div class="answered-status"><span class="incorrect">{% trans "You have previously answered this task incorrectly." %}</span></div>
    {% elif evaluation == "correct" %}
      <div class="answered-status"><span class="correct">{% trans "You have already answered this task correctly." %}</span></div>
    {% endif %}

    {% block exercise-form-extra %}
    {% endblock %}
  </form>
  <div class="results-box error" style="display: none"></div>
  <div class="results-box result" style="display: none"></div>
  <div class="results-box file-result" style="display: none"></div>
  <div class="results-box msgs" style="display: none">
    <span class="results-header">{% trans 'Messages' %}</span>
    <div class="msgs-list"></div>
  </div>
  <div class="results-box comments" style="display: none"></div>
</div>

{% block feedback %}
  {% feedbacks %}
{% endblock %}
